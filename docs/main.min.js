"use strict";var myMap,intervalId,soundLevel,accoMesureWidth=function(e){var t=0,n=$(window).width(),o=e.closest(".acco__list").find(".acco__button"),o=o.width()*o.length,e=e.find(".acco__text"),i=parseInt(e.css("padding-left")),e=parseInt(e.css("padding-right"));return{container:t=window.matchMedia("(max-width: 830px)").matches?n-o:524,textContainer:t-i-e}},closeEveryItemInAcco=function(e){var t=e.find(".acco__item"),e=e.find(".acco__content");t.removeClass("acco__item--active"),e.width(0)},openAccoItem=function(e){var t=e.find(".acco__content"),n=accoMesureWidth(e),o=e.find(".acco__text");e.addClass("acco__item--active"),t.width(n.container),o.width(n.textContainer)},validateFields=($(".acco__button").on("click",function(e){e.preventDefault();var e=$(e.currentTarget),t=e.closest(".acco__item"),n=t.hasClass("acco__item--active"),e=e.closest(".acco__list");n?closeEveryItemInAcco(e):(closeEveryItemInAcco(e),openAccoItem(t))}),function(e,t){return t.forEach(function(e){e.removeClass("input-error"),""===e.val().trim()&&e.addClass("input-error")}),0===e.find(".input-error").length}),openButton=($(".form").submit(function(e){e.preventDefault();var e=$(e.currentTarget),t=e.find("[name='name']"),n=e.find("[name='phone']"),o=e.find("[name='comment']"),i=e.find("[name='to']"),a=$("#modal").find(".modal__message");validateFields(e,[t,n,o,i])&&((e=$.ajax({url:"https://webdev-api.loftschool.com/sendmail",method:"post",data:{name:t.val(),phone:n.val(),comment:o.val(),to:i.val()}})).done(function(e){a.text(e.message)}),e.fail(function(e){a.text(e.responseJSON.message)}),e.always(function(){Fancybox.show([{src:"#modal",type:"inline"}])}))}),$(".app-close-btn").click(function(e){e.preventDefault(),Fancybox.close()}),document.querySelector(".hamburger")),hamburgerMenu=document.querySelector(".hamburger-menu"),closeButton=document.querySelector(".hamburger-menu__close"),init=(openButton.addEventListener("click",function(e){e.preventDefault(),hamburgerMenu.classList.add("active")}),closeButton.addEventListener("click",function(e){e.preventDefault(),hamburgerMenu.classList.remove("active")}),$("[data-scroll-to").click(function(e){e.preventDefault(),hamburgerMenu.classList.remove("active")}),function(){myMap=new ymaps.Map("map",{center:[56.311465,43.97923],zoom:12,controls:[]});var t=new ymaps.GeoObjectCollection({},{draggable:!1,iconLayout:"default#image",iconImageHref:"./img/svg/marker.svg",iconImageSize:[46,57],iconImageOffset:[-35,-52]});[[56.330045,44.009406],[56.337672,43.963286],[56.292091,43.97923]].forEach(function(e){t.add(new ymaps.Placemark(e))}),myMap.geoObjects.add(t),myMap.behaviors.disable("scrollZoom")}),sections=(ymaps.ready(init),$(".section")),display=$(".maincontent"),sideMenu=$(".fixed-menu"),sideMenuItems=$(".fixed-menu__item"),mobileDetect=new MobileDetect(window.navigator.userAgent),isMobile=mobileDetect.mobile(),inScroll=!1,countSectionPosition=(sections.first().addClass("section--active"),function(e){e*=-100;return isNaN(e)?0:e}),changeMenuTheme=function(e){"dark"===sections.eq(e).attr("data-sidemenu-theme")?sideMenu.addClass("fixed-menu--dark"):sideMenu.removeClass("fixed-menu--dark")},resetActiveClassForItem=function(e,t,n){e.eq(t).addClass(n).siblings().removeClass(n)},performTransition=function(e){var t;inScroll||(inScroll=!0,t=countSectionPosition(e),changeMenuTheme(e),display.css({transform:"translateY(".concat(t,"%)")}),resetActiveClassForItem(sections,e,"section--active"),setTimeout(function(){inScroll=!1,resetActiveClassForItem(sideMenuItems,e,"fixed-menu__item--active")},1300))},viewportScroller=function(){var e=sections.filter(".section--active"),t=e.next(),n=e.prev();return{next:function(){t.length&&performTransition(t.index())},prev:function(){n.length&&performTransition(n.index())}}},slider=($(window).on("wheel",function(e){var e=e.originalEvent.deltaY,t=viewportScroller();0<e&&t.next(),e<0&&t.prev()}),$(window).on("keydown",function(e){var t=e.target.tagName.toLowerCase(),t="input"===t||"textarea"===t,n=viewportScroller();if(!t)switch(e.keyCode){case 38:n.prev();break;case 40:n.next()}}),$(".wrapper").on("touchmove",function(e){return e.preventDefault()}),$("[data-scroll-to]").click(function(e){e.preventDefault();e=$(e.currentTarget).attr("data-scroll-to"),e=$("[data-section-id=".concat(e,"]"));performTransition(e.index())}),isMobile&&$("body").swipe({swipe:function(e,t){var n=viewportScroller(),t="down"===t?"prev":"up"===t?"next":"";t&&n[t]()}}),$(".products__list").bxSlider({pager:!1,controls:!1})),findBlock=($(".products__arrow--prev").click(function(e){e.preventDefault(),slider.goToPrevSlide()}),$(".products__arrow--next").click(function(e){e.preventDefault(),slider.goToNextSlide()}),function(n){return $(".reviews__item").filter(function(e,t){return $(t).attr("data-linked-with")===n})}),openItem=($(".interactive-avatar__link").click(function(e){e.preventDefault();e=$(e.currentTarget);findBlock(e.attr("data-open")).addClass("reviews__item--active").siblings().removeClass("reviews__item--active"),e.closest(".interactive-avatar").addClass("interactive-avatar--active").siblings().removeClass("interactive-avatar--active")}),function(e){var e=e.closest(".team__item"),t=e.find(".team__content");e.addClass("team__item--active"),t.height(t.find(".team__content-inner").height())}),closeEveryItem=function(e){e.find(".team__item").removeClass("team__item--active"),e.find(".team__content").height(0)},playBtn=($(".team__name").click(function(e){var e=$(e.currentTarget),t=e.closest(".team__list");e.closest(".team__item").hasClass("team__item--active")?closeEveryItem(t):(closeEveryItem(t),openItem(e))}),document.querySelector(".video__btn-img")),playerPlayBrn=document.querySelector(".duration__btn"),video=document.getElementById("player"),durationControl=document.getElementById("durationLevel"),soundControl=document.getElementById("micLevel"),soundBtn=document.getElementById("soundBtn"),dynamicBtn=document.getElementById("dynamic");function playStop(){playBtn.classList.toggle("video__btn-img--active"),playerPlayBrn.classList.toggle("active"),video.paused?(video.play(),intervalId=setInterval(updateDuration,1e3)):(clearInterval(intervalId),video.pause())}function setVideoDuration(){video.currentTime=durationControl.value,updateDuration()}function updateDuration(){durationControl.value=video.currentTime;var e=video.duration/100,e=video.currentTime/e;durationControl.style.background="linear-gradient(90deg, #FEDB3F 0%, #FEDB3F ".concat(e,"%, #626262 ").concat(e,"%)")}function changeSoundVolume(){video.volume=soundControl.value/10,0===video.volume?soundBtn.classList.add("active"):soundBtn.classList.remove("active")}function soundOf(){0===video.volume?(video.volume=soundLevel,soundControl.value=10*soundLevel,soundBtn.classList.remove("active")):(soundLevel=video.volume,video.volume=0,soundControl.value=0,soundBtn.classList.add("active"))}window.addEventListener("load",function(){video.addEventListener("click",playStop);for(var e=document.querySelectorAll(".play"),t=0;t<e.length;t++)e[t].addEventListener("click",playStop);durationControl.min=0,durationControl.value=0,durationControl.max=video.duration,durationControl.addEventListener("input",setVideoDuration),soundControl.min=0,soundControl.max=10,soundControl.value=soundControl.max,soundControl.addEventListener("input",changeSoundVolume),dynamicBtn.addEventListener("click",soundOf),video.addEventListener("ended",function(){playBtn.classList.toggle("video__btn-img--active"),playerPlayBrn.classList.remove("active"),video.currentTime=0})});